{% extends "base.html" %}

{% block title %}Settings - Setlist Manager{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Settings</h1>
</div>

<section class="panel">
    <header>
        <h2>Timer Configuration</h2>
    </header>
    <form method="post" class="stacked">
        <label>
            Timer API URL
            <input
                type="url"
                name="timer_api_url"
                value="{{ timer_url }}"
                placeholder="http://localhost:3001/api/import-setlist"
                required
            >
        </label>
        <p class="help-text">
            Enter the URL of your timer system's import API endpoint.
            This should be the full URL including the path (e.g., http://192.168.1.100:3001/api/import-setlist).
        </p>

        <label>
            Default Transition Time (seconds)
            <input
                type="number"
                name="default_transition_time"
                value="{{ default_transition_time }}"
                min="0"
                max="300"
                required
            >
        </label>
        <p class="help-text">
            Default time between songs in seconds (default: 30 seconds).
            This is used when calculating total setlist duration.
        </p>

        <label>
            Default Encore Break Time (seconds)
            <input
                type="number"
                name="default_encore_break_time"
                value="{{ default_encore_break_time }}"
                min="0"
                max="600"
                required
            >
        </label>
        <p class="help-text">
            Default break time before encore in seconds (default: 240 seconds = 4 minutes).
            This is added when there's an encore in the setlist.
        </p>

        <div class="button-row">
            <button type="submit">Save Settings</button>
            <a href="{{ url_for('setlists.index') }}" class="link-button">Cancel</a>
        </div>
    </form>
</section>

<section class="panel">
    <header>
        <h2>How to use the Timer feature</h2>
    </header>
    <div class="prose">
        <ol>
            <li>Configure your timer API URL above</li>
            <li>Navigate to any setlist page</li>
            <li>Click the "Send to Timer" button</li>
            <li>Your setlist will be sent to the timer system in the expected JSON format</li>
        </ol>

        <h3>JSON Format</h3>
        <p>The timer system expects the setlist data in this format:</p>
        <pre><code>{
  "mainSet": {
    "songs": ["Song 1", "Song 2", "Song 3"],
    "duration": "01:23:45"
  },
  "encore": {
    "songs": ["Encore Song"],
    "duration": "00:10:00"
  }
}</code></pre>

        <p><strong>Note:</strong> The duration format is hh:mm:ss (hours:minutes:seconds).</p>
    </div>
</section>
{% endblock %}