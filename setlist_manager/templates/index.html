{% extends "base.html" %}

{% block title %}Setlists · Setlist Manager{% endblock %}

{% block content %}
<section class="panel">
    <header>
        <h2>Your Setlists</h2>
        <div class="panel-actions">
            <a class="button" href="{{ url_for('setlists.create_setlist') }}">Create Setlist</a>
            <a class="button" href="{{ url_for('setlists.import_setlists') }}">Import Past Setlists</a>
        </div>
    </header>

    {% if setlists %}
        <ul class="setlist-grid">
            {% for setlist in setlists %}
                <li class="setlist-card">
                    <h3><a href="{{ url_for('setlists.view_setlist', setlist_id=setlist.id) }}">{{ setlist.name }}</a></h3>
                    {% if setlist.description %}
                        <p class="setlist-description">{{ setlist.description }}</p>
                    {% endif %}
                    <dl>
                        <div>
                            <dt>Songs</dt>
                            <dd>{{ setlist.entries|length }}</dd>
                        </div>
                        <div>
                            <dt>Total Duration</dt>
                            <dd>{{ setlist.total_duration_label }}</dd>
                        </div>
                        <div>
                            <dt>Target</dt>
                            <dd>{{ setlist.target_duration_label }}</dd>
                        </div>
                        <div>
                            <dt>Created</dt>
                            <dd>{{ setlist.created_at.strftime('%b %d, %Y') }}</dd>
                        </div>
                    </dl>
                    <footer>
                        <a class="button" href="{{ url_for('setlists.view_setlist', setlist_id=setlist.id) }}">Open</a>
                    </footer>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No setlists yet — <a href="{{ url_for('setlists.create_setlist') }}">create your first one</a>.</p>
    {% endif %}
</section>

<section class="panel secondary">
    <header>
        <h2>Library Snapshot</h2>
    </header>
    <p>You currently have {{ total_songs }} song{{ '' if total_songs == 1 else 's' }} saved.</p>
    <p><a href="{{ url_for('setlists.songs') }}">Manage songs</a></p>
</section>
{% endblock %}
